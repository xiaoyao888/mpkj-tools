import{_ as co,r as i,l as ro,n as uo,m as to,a as z,b as w,f as S,t as B,i as mo,p as G,g as A,h as q,o as D}from"./index-DF4DKs1s.js";const U=[{row:7,col:7,num:1},{row:8,col:7,num:2},{row:8,col:6,num:3},{row:7,col:6,num:4},{row:6,col:6,num:5},{row:6,col:7,num:6},{row:6,col:8,num:7},{row:7,col:8,num:8},{row:8,col:8,num:9},{row:9,col:8,num:10},{row:9,col:7,num:11},{row:9,col:6,num:12},{row:9,col:5,num:13},{row:8,col:5,num:14},{row:7,col:5,num:15},{row:6,col:5,num:16},{row:5,col:5,num:17},{row:5,col:6,num:18},{row:5,col:7,num:19},{row:5,col:8,num:20},{row:5,col:9,num:21},{row:6,col:9,num:22},{row:7,col:9,num:23},{row:8,col:9,num:24},{row:9,col:9,num:25},{row:10,col:9,num:26},{row:10,col:8,num:27},{row:10,col:7,num:28},{row:10,col:6,num:29},{row:10,col:5,num:30},{row:10,col:4,num:31},{row:9,col:4,num:32},{row:8,col:4,num:33},{row:7,col:4,num:34},{row:6,col:4,num:35},{row:5,col:4,num:36},{row:4,col:4,num:37},{row:4,col:5,num:38},{row:4,col:6,num:39},{row:4,col:7,num:40},{row:4,col:8,num:41},{row:4,col:9,num:42},{row:4,col:10,num:43},{row:5,col:10,num:44},{row:6,col:10,num:45},{row:7,col:10,num:46},{row:8,col:10,num:47},{row:9,col:10,num:48},{row:10,col:10,num:49},{row:11,col:10,num:50},{row:11,col:9,num:51},{row:11,col:8,num:52},{row:11,col:7,num:53},{row:11,col:6,num:54},{row:11,col:5,num:55},{row:11,col:4,num:56},{row:11,col:3,num:57},{row:10,col:3,num:58},{row:9,col:3,num:59},{row:8,col:3,num:60},{row:7,col:3,num:61},{row:6,col:3,num:62},{row:5,col:3,num:63},{row:4,col:3,num:64},{row:3,col:3,num:65},{row:3,col:4,num:66},{row:3,col:5,num:67},{row:3,col:6,num:68},{row:3,col:7,num:69},{row:3,col:8,num:70},{row:3,col:9,num:71},{row:3,col:10,num:72},{row:3,col:11,num:73},{row:4,col:11,num:74},{row:5,col:11,num:75},{row:6,col:11,num:76},{row:7,col:11,num:77},{row:8,col:11,num:78},{row:9,col:11,num:79},{row:10,col:11,num:80},{row:11,col:11,num:81},{row:12,col:11,num:82},{row:12,col:10,num:83},{row:12,col:9,num:84},{row:12,col:8,num:85},{row:12,col:7,num:86},{row:12,col:6,num:87},{row:12,col:5,num:88},{row:12,col:4,num:89},{row:12,col:3,num:90},{row:12,col:2,num:91},{row:11,col:2,num:92},{row:10,col:2,num:93},{row:9,col:2,num:94},{row:8,col:2,num:95},{row:7,col:2,num:96},{row:6,col:2,num:97},{row:5,col:2,num:98},{row:4,col:2,num:99},{row:3,col:2,num:100},{row:2,col:2,num:101},{row:2,col:3,num:102},{row:2,col:4,num:103},{row:2,col:5,num:104},{row:2,col:6,num:105},{row:2,col:7,num:106},{row:2,col:8,num:107},{row:2,col:9,num:108},{row:2,col:10,num:109},{row:2,col:11,num:110},{row:2,col:12,num:111},{row:3,col:12,num:112},{row:4,col:12,num:113},{row:5,col:12,num:114},{row:6,col:12,num:115},{row:7,col:12,num:116},{row:8,col:12,num:117},{row:9,col:12,num:118},{row:10,col:12,num:119},{row:11,col:12,num:120},{row:12,col:12,num:121},{row:13,col:12,num:122},{row:13,col:11,num:123},{row:13,col:10,num:124},{row:13,col:9,num:125},{row:13,col:8,num:126},{row:13,col:7,num:127},{row:13,col:6,num:128},{row:13,col:5,num:129},{row:13,col:4,num:130},{row:13,col:3,num:131},{row:13,col:2,num:132},{row:13,col:1,num:133},{row:12,col:1,num:134},{row:11,col:1,num:135},{row:10,col:1,num:136},{row:9,col:1,num:137},{row:8,col:1,num:138},{row:7,col:1,num:139},{row:6,col:1,num:140},{row:5,col:1,num:141},{row:4,col:1,num:142},{row:3,col:1,num:143},{row:2,col:1,num:144},{row:1,col:1,num:145},{row:1,col:2,num:146},{row:1,col:3,num:147},{row:1,col:4,num:148},{row:1,col:5,num:149},{row:1,col:6,num:150},{row:1,col:7,num:151},{row:1,col:8,num:152},{row:1,col:9,num:153},{row:1,col:10,num:154},{row:1,col:11,num:155},{row:1,col:12,num:156},{row:1,col:13,num:157},{row:2,col:13,num:158},{row:3,col:13,num:159},{row:4,col:13,num:160},{row:5,col:13,num:161},{row:6,col:13,num:162},{row:7,col:13,num:163},{row:8,col:13,num:164},{row:9,col:13,num:165},{row:10,col:13,num:166},{row:11,col:13,num:167},{row:12,col:13,num:168},{row:13,col:13,num:169},{row:14,col:13,num:170},{row:14,col:12,num:171},{row:14,col:11,num:172},{row:14,col:10,num:173},{row:14,col:9,num:174},{row:14,col:8,num:175},{row:14,col:7,num:176},{row:14,col:6,num:177},{row:14,col:5,num:178},{row:14,col:4,num:179},{row:14,col:3,num:180},{row:14,col:2,num:181},{row:14,col:1,num:182},{row:14,col:0,num:183},{row:13,col:0,num:184},{row:12,col:0,num:185},{row:11,col:0,num:186},{row:10,col:0,num:187},{row:9,col:0,num:188},{row:8,col:0,num:189},{row:7,col:0,num:190},{row:6,col:0,num:191},{row:5,col:0,num:192},{row:4,col:0,num:193},{row:3,col:0,num:194},{row:2,col:0,num:195},{row:1,col:0,num:196},{row:0,col:0,num:197},{row:0,col:1,num:198},{row:0,col:2,num:199},{row:0,col:3,num:200},{row:0,col:4,num:201},{row:0,col:5,num:202},{row:0,col:6,num:203},{row:0,col:7,num:204},{row:0,col:8,num:205},{row:0,col:9,num:206},{row:0,col:10,num:207},{row:0,col:11,num:208},{row:0,col:12,num:209},{row:0,col:13,num:210},{row:0,col:14,num:211},{row:1,col:14,num:212},{row:2,col:14,num:213},{row:3,col:14,num:214},{row:4,col:14,num:215},{row:5,col:14,num:216},{row:6,col:14,num:217},{row:7,col:14,num:218},{row:8,col:14,num:219},{row:9,col:14,num:220},{row:10,col:14,num:221},{row:11,col:14,num:222},{row:12,col:14,num:223},{row:13,col:14,num:224},{row:14,col:14,num:225}],ao={class:"header-wrapper"},wo={class:"control-buttons"},so={key:0},io={key:1},vo={class:"game-info"},fo={class:"board-container"},po={class:"chessboard-container"},bo={class:"action-buttons"},ho={class:"button-group"},go=["disabled"],ko={class:"game-over-message"},t=15,xo={__name:"gobang",setup(_o){const d=i(!1),v=i(()=>{const l=[];for(let o=0;o<t;o++){const e=[];for(let c=0;c<t;c++)e.push("");l.push(e)}return l}),f=i("black"),T=i("五子棋游戏，连胜1把"),x=i(""),V=i("眼镜连麦"),P=i(""),M=i(!1),R=i(!1),_=i(!1),b=i(""),E=i(null),y=i([]);let s=null,n=null,a=0,u=0;const j=()=>{if(!E.value)return;s=E.value,n=s.getContext("2d");const l=s.parentElement,o=Math.min(l.clientWidth,l.clientHeight);s.width=o,s.height=o,u=o*.05,a=(o-u*2)/(t-1),C()},C=()=>{if(!(!n||!s)){n.clearRect(0,0,s.width,s.height),n.fillStyle=d.value?"#666":"#f0d9b5",n.fillRect(0,0,s.width,s.height),n.strokeStyle=d.value?"#333":"#8c7851",n.lineWidth=1;for(let l=0;l<t;l++)n.beginPath(),n.moveTo(u,u+l*a),n.lineTo(s.width-u,u+l*a),n.stroke(),n.beginPath(),n.moveTo(u+l*a,u),n.lineTo(u+l*a,s.height-u),n.stroke();L(),X(),Y()}},L=()=>{if(!n)return;const l=[{row:3,col:3},{row:3,col:11},{row:7,col:7},{row:11,col:3},{row:11,col:11}];n.fillStyle=d.value?"#333":"#8c7851";for(const o of l){const e=u+o.col*a,c=u+o.row*a;n.beginPath(),n.arc(e,c,4,0,2*Math.PI),n.fill()}},X=()=>{if(!n)return;n.font="10px Arial",n.fillStyle=d.value?"#ccc":"#333",n.textAlign="center",n.textBaseline="middle";const l=[];for(let o=0;o<t;o++)l[o]=[];for(let o=0;o<t;o++)for(let e=0;e<t;e++)l[o][e]=null;if(U&&Array.isArray(U))for(const o of U){const{row:e,col:c,num:r}=o;e>=0&&e<t&&c>=0&&c<t&&(l[e][c]=r)}for(let o=0;o<t;o++)for(let e=0;e<t;e++){const c=u+e*a,r=u+o*a,m=l[o][e];n.fillStyle=d.value?"#ccc":"#333",m>=1&&m<=9?n.font="20px Arial":m>=10&&m<=99?n.font="14px Arial":m>=100&&(n.font="12px Arial"),m!==null&&n.fillText(m.toString(),c,r)}},Y=()=>{if(!n)return;const l=a*.45;for(let o=0;o<t;o++)for(let e=0;e<t;e++){const c=v.value[o][e];if(c){const r=u+e*a,m=u+o*a;if(n.beginPath(),n.arc(r+2,m+2,l,0,2*Math.PI),n.fillStyle="rgba(0, 0, 0, 0.2)",n.fill(),n.beginPath(),n.arc(r,m,l,0,2*Math.PI),n.fillStyle=c==="black"?"#000":"#fff",n.fill(),c==="white"&&(n.strokeStyle="#ddd",n.lineWidth=1,n.stroke()),c==="black"){const h=n.createRadialGradient(r-l*.3,m-l*.3,0,r,m,l);h.addColorStop(0,"rgba(255, 255, 255, 0.3)"),h.addColorStop(1,"rgba(255, 255, 255, 0)"),n.beginPath(),n.arc(r,m,l,0,2*Math.PI),n.fillStyle=h,n.fill()}}}},F=(l,o)=>{if(l<u-a*.5||l>s.width-u+a*.5||o<u-a*.5||o>s.height-u+a*.5)return null;const e=Math.round((l-u)/a),c=Math.round((o-u)/a);return e>=0&&e<t&&c>=0&&c<t?{row:c,col:e}:null},H=l=>{if(b.value!=="")return;const o=s.getBoundingClientRect(),e=l.clientX-o.left,c=l.clientY-o.top,r=F(e,c);r&&N(r.row,r.col)},$=l=>{if(l.preventDefault(),b.value!=="")return;const o=s.getBoundingClientRect(),e=l.touches[0],c=e.clientX-o.left,r=e.clientY-o.top,m=F(c,r);m&&N(m.row,m.col)},J=()=>{d.value=!d.value,C()},K=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen().catch(l=>{console.error("全屏请求失败:",l)})},I=()=>{v.value=[];for(let l=0;l<t;l++){const o=[];for(let e=0;e<t;e++)o.push("");v.value.push(o)}f.value="black",b.value="",y.value=[],C()};I();const N=(l,o)=>{if(!(v.value[l][o]!==""||b.value!=="")){if(v.value[l][o]=f.value,y.value.push({row:l,col:o,player:f.value}),C(),Z(l,o)){b.value=f.value==="black"?"黑棋":"白棋",_.value=!0;return}f.value=f.value==="black"?"white":"black"}},Q=()=>{if(y.value.length===0)return;b.value!==""&&(_.value=!1,b.value="");const l=y.value.pop();v.value[l.row][l.col]="",f.value=l.player,C()},Z=(l,o)=>{const e=[[0,1],[1,0],[1,1],[1,-1]],c=v.value[l][o];for(const[r,m]of e){let h=1;for(let p=1;p<5;p++){const g=l+r*p,k=o+m*p;if(g>=0&&g<t&&k>=0&&k<t&&v.value[g][k]===c)h++;else break}for(let p=1;p<5;p++){const g=l-r*p,k=o-m*p;if(g>=0&&g<t&&k>=0&&k<t&&v.value[g][k]===c)h++;else break}if(h>=5)return!0}return!1},O=()=>{I(),_.value=!1},oo=()=>{x.value=T.value,M.value=!0},lo=()=>{x.value.trim()&&(T.value=x.value.trim()),M.value=!1},no=()=>{x.value=T.value,R.value=!0},eo=()=>{P.value.trim()&&(V.value=P.value.trim()),R.value=!1},W=()=>{j()};return ro(()=>{uo(()=>{j(),window.addEventListener("resize",W)})}),to(()=>{window.removeEventListener("resize",W)}),(l,o)=>{const e=q("a-input"),c=q("a-modal");return D(),z("div",{class:G(["gobang-container",{"dark-mode":d.value}])},[w("div",ao,[w("h1",{class:"game-title",onDblclick:oo},B(T.value),33),w("h3",{class:"sub-title",onDblclick:no},B(V.value),33)]),w("div",wo,[w("button",{class:"control-btn",onClick:J,title:"切换暗夜模式"},[d.value?(D(),z("span",io,"☀️")):(D(),z("span",so,"🌙"))]),w("button",{class:"control-btn",onClick:K,title:"全屏/退出全屏"},o[6]||(o[6]=[w("span",null,"🔍",-1)]))]),w("div",vo,[w("p",null,[o[7]||(o[7]=mo("当前玩家: ")),w("span",{class:G(f.value==="black"?"player-black":"player-white")},B(f.value==="black"?"黑棋":"白棋"),3)])]),w("div",fo,[w("div",po,[w("canvas",{ref_key:"canvasRef",ref:E,class:"chessboard",onClick:H,onTouchstart:$},null,544)])]),w("div",bo,[w("div",ho,[w("button",{class:"reset-button",onClick:O},"重新开始"),w("button",{class:"undo-button",onClick:Q,disabled:y.value.length===0},"悔棋",8,go)])]),S(c,{open:M.value,"onUpdate:open":o[1]||(o[1]=r=>M.value=r),title:"编辑游戏标题","ok-text":"确定","cancel-text":"取消",onOk:lo},{default:A(()=>[S(e,{value:x.value,"onUpdate:value":o[0]||(o[0]=r=>x.value=r),placeholder:"请输入新的游戏标题",maxlength:"20"},null,8,["value"])]),_:1},8,["open"]),S(c,{open:R.value,"onUpdate:open":o[3]||(o[3]=r=>R.value=r),title:"编辑游戏子标题","ok-text":"确定","cancel-text":"取消",onOk:eo},{default:A(()=>[S(e,{value:P.value,"onUpdate:value":o[2]||(o[2]=r=>P.value=r),placeholder:"请输入新的游戏子标题",maxlength:"20"},null,8,["value"])]),_:1},8,["open"]),S(c,{open:_.value,"onUpdate:open":o[4]||(o[4]=r=>_.value=r),title:"游戏结束","ok-text":"再来一局","cancel-text":"关闭",onOk:O,onCancel:o[5]||(o[5]=r=>_.value=!1)},{default:A(()=>[w("p",ko,B(b.value)+"获胜！ ",1)]),_:1},8,["open"])],2)}}},Co=co(xo,[["__scopeId","data-v-18bfa734"]]);export{Co as default};
